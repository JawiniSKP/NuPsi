version: "3.1"

intents:
  - greet
  - goodbye
  - affirm
  - deny
  - thanks
  - bot_challenge
  - introduce_bot
  - ask_capabilities
  - ask_diet_general
  - ask_specific_food
  - ask_meal_planning
  - ask_hydration
  - ask_weight_loss
  - ask_exercise_general
  - ask_workout_plan
  - ask_muscle_group
  - ask_cardio_benefits
  - ask_strength_training
  - ask_progress_tracking
  - ask_motivation_support
  - out_of_scope
  - express_sadness
  - express_anxiety
  - express_anger
  - express_happiness
  - ask_emotional_support
  - ask_stress_management
  - ask_emotional_eating
  - ask_healthy_snacks
  - nlu_fallback

entities:
  - macronutrient
  - muscle_group
  - goal

slots:
  macronutrient:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: macronutrient

  muscle_group:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: muscle_group

  goal:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: goal

  # â€”â€” Slots del formulario de perfil â€”â€”
  user_goal:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - active_loop: nutrition_profile_form
            requested_slot: user_goal

  dietary_restrictions:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - active_loop: nutrition_profile_form
            requested_slot: dietary_restrictions

  activity_level:
    type: text
    influence_conversation: false
    mappings:
      - type: from_text
        conditions:
          - active_loop: nutrition_profile_form
            requested_slot: activity_level

  # â€”â€” BMI y recetas â€”â€”
  weight_kg:
    type: text
    influence_conversation: false
    mappings:
      - type: custom

  height_m:
    type: text
    influence_conversation: false
    mappings:
      - type: custom

  recipe_type:
    type: text
    influence_conversation: true
    mappings:
      - type: from_text
        intent:
          - ask_meal_planning

forms:
  nutrition_profile_form:
    required_slots:
      - user_goal
      - dietary_restrictions
      - activity_level

responses:
  utter_greet:
    - text: "Â¡Hola! Soy tu asistente de nutriciÃ³n y cambios fÃ­sicos. Â¿En quÃ© te ayudo hoy?"
  utter_goodbye:
    - text: "Â¡Gracias por conversar! Â¡Ãnimo con tus objetivos! ğŸ‘‹"
  utter_thanks:
    - text: "Â¡Con gusto! Â¿Algo mÃ¡s en lo que te pueda apoyar?"
  utter_iamabot:
    - text: "Soy un asistente virtual diseÃ±ado para ayudarte con nutriciÃ³n, ejercicio y bienestar."
  utter_default:
    - text: "PerdÃ³n, no entendÃ­ bien. Â¿Puedes reformular tu pregunta con mÃ¡s detalles?"
  utter_out_of_scope:
    - text: "Ese tema estÃ¡ fuera de mi alcance por ahora. Puedo ayudarte con nutriciÃ³n, ejercicio y gestiÃ³n emocional."
  utter_ask_capabilities:
    - text: "Puedo darte pautas de alimentaciÃ³n saludable, ideas de plan de comidas, rutinas de ejercicio, seguimiento de progreso y apoyo motivacional."
  utter_ask_diet_general:
    - text: "Una dieta saludable prioriza alimentos mÃ­nimamente procesados, verduras, frutas, legumbres, granos integrales, proteÃ­nas de calidad y grasas saludables. Â¿Tienes algÃºn objetivo especÃ­fico?"
  utter_ask_specific_food:
    - text: "Â¿QuÃ© alimento te interesa? Si quieres, dime si lo consultas por calorÃ­as, proteÃ­nas o beneficios."
  utter_ask_meal_planning:
    - text: "Para planificar: define objetivo, calorÃ­as aproximadas, 3-4 comidas + 1-2 snacks, lista de compras y batch cooking semanal."
  utter_ask_hydration:
    - text: "Una recomendaciÃ³n general es ~30â€“35 ml/kg/dÃ­a, ajustando por clima y actividad. Â¿Haces ejercicio frecuente?"
  utter_ask_weight_loss:
    - text: "Para perder grasa: dÃ©ficit calÃ³rico moderado, proteÃ­na adecuada, fuerza + cardio, y sueÃ±o. Â¿Quieres calcular un menÃº base?"
  utter_ask_exercise_general:
    - text: "Empieza con 2â€“3 dÃ­as de fuerza + 2 de cardio suave. ProgresiÃ³n gradual. Â¿Entrenas en casa o gimnasio?"
  utter_ask_cardio_benefits:
    - text: "El cardio mejora salud cardiovascular, quema calorÃ­as y ayuda a la recuperaciÃ³n. 90â€“150 min/semana es un buen rango para empezar."
  utter_ask_strength_training:
    - text: "La fuerza ayuda a ganar/retener mÃºsculo, mejorar metabolismo y postura. 2â€“4 sesiones/semana por grupos musculares."
  utter_ask_motivation_support:
    - text: "Piensa en objetivos SMART y registra tus avances (mediciones, fotos). Â¿QuÃ© te cuesta mÃ¡s mantener?"
  utter_express_sadness:
    - text: "Siento que te sientas asÃ­. Podemos avanzar con pasos pequeÃ±os y realistas. Estoy aquÃ­ para ayudarte."
  utter_express_anxiety:
    - text: "La ansiedad es difÃ­cil. Respiremos 4-4-8 y enfoquÃ©monos en acciones pequeÃ±as que controlas hoy."
  utter_express_anger:
    - text: "Entiendo la frustraciÃ³n. Canalizar en movimiento suave o una pausa breve puede ayudar."
  utter_express_happiness:
    - text: "Â¡QuÃ© bueno! Aprovechemos esa energÃ­a para consolidar hÃ¡bitos."
  utter_ask_emotional_support:
    - text: "Estoy contigo. Â¿Quieres que revisemos gatillantes y hagamos un plan breve para hoy?"
  utter_ask_stress_management:
    - text: "Prueba respiraciÃ³n diafragmÃ¡tica 5 min, pausa activa y lÃ­mites de horarios. Â¿Te dejo una rutina breve?"
  utter_ask_emotional_eating:
    - text: "Identifiquemos si es hambre fÃ­sica o emocional. PropÃ³n una alternativa: tÃ©, paseo corto, snack rico en proteÃ­na."
  utter_ask_healthy_snacks:
    - text: "Ideas: yogur + fruta, frutos secos + pasas, huevo cocido, hummus + zanahoria, avena con leche, sÃ¡ndwich integral de pavo."
  # Form messages
  utter_ask_nutrition_profile_form_user_goal:
    - text: "Â¿CuÃ¡l es tu objetivo principal? (p. ej., perder grasa, ganar mÃºsculo, rendimiento)"
  utter_ask_nutrition_profile_form_dietary_restrictions:
    - text: "Â¿Tienes restricciones o preferencias? (p. ej., vegetariano, sin lactosa, alergias)"
  utter_ask_nutrition_profile_form_activity_level:
    - text: "Â¿CuÃ¡l es tu nivel de actividad? (sedentario, ligero, moderado, alto)"
  utter_submit_nutrition_profile_form:
    - text: "Â¡Genial! Con eso puedo proponerte pautas personalizadas. Â¿Quieres un plan semanal base?"

actions:
  - action_answer_specific_food
  - action_propose_meal_plan
  - action_propose_workout
  - action_track_progress_tip
  - action_calculate_bmi
  - action_provide_recipe
  - action_fallback_to_gemini

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
