language: es

pipeline:
- name: WhitespaceTokenizer
- name: RegexFeaturizer
- name: LexicalSyntacticFeaturizer
- name: CountVectorsFeaturizer
- name: CountVectorsFeaturizer
  analyzer: "char_wb"
  min_ngram: 1
  max_ngram: 4
- name: DIETClassifier
  epochs: 100
  constrain_similarities: true
- name: EntitySynonymMapper

policies:
  # #1. RulePolicy SIEMPRE debe ir primero para que las reglas se apliquen antes que nada.
- name: RulePolicy
    # Esta es la nueva forma de manejar el fallback.
    # Si la confianza del NLU está por debajo de 0.5, activa esta acción directamente.
  nlu_fallback_threshold: 0.5
  core_fallback_threshold: 0.5
  fallback_action_name: "action_fallback_to_gemini"

  # #2. MemoizationPolicy recuerda conversaciones.
- name: MemoizationPolicy

  # #3. TEDPolicy predice si no hay reglas o historias.
- name: TEDPolicy
  max_history: 5
  epochs: 100
  constrain_similarities: true
assistant_id: 20251109-184012-crunchy-narrative
